{% block store_list %} {% load static %}
<div id="parent" class="space-y-7"></div>
<script>
  function capitalizeWords(string) {
    return string
      .split(" ")
      .map((word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
      .join(" ");
  }

  fetch("/get_json_data_store_name/") // Replace with the URL of your Django view
    .then(function (response) {
      return response.json();
    })
    .then(function (outlets) {
      console.log(outlets);
      // Create an HTML string for the div
      const parentDiv = document.getElementById("parent");
      for (const city in outlets) {
        const cityData = outlets[city];
        var content = `
        <div x-data="{ open: false, svgUp: true}">
      <button
        @click="open = !open; svgUp = !svgUp"
        class="flex m-auto justify-between w-9/12"
      >
        <h1 class="text-1.5xl font-bold text-pink-main">${city}</h1>
        <img x-show="svgUp" src="{% static 'icon/dropdown.svg' %}" />
        <img
          x-show="open"
          class="rotate-180"
          src="{% static 'icon/dropdown.svg' %}"
        />
      </button>
      <div
        x-show="open"
        class="flex m-auto justify-center w-9/12 p-4 bg-pink-dropdown text-gray-700"
        aria-labelledby="dropdownMenuButton1"
      >
        <div class="grid grid-cols-2 justify-stretch w-full">`;

        var content_end = `</div></div>`;
        for (let i = 0; i < cityData.length; i++) {
          var store_name_content = `
          <div class="col-span-1 py-1.5 text-sm font-semibold">
            <img
              class="inline"
              src="{% static 'icon/map.svg' %}"
              width="28px"
              height="28px"
            />
            ${capitalizeWords(cityData[i])}
          </div>`;
          content = content + store_name_content;
        }

        content = content + content_end;
        const newDiv = document.createElement("div");
        newDiv.innerHTML = content;
        parentDiv.appendChild(newDiv);
      }
    });
</script>
{% endblock store_list %}
